<!DOCTYPE HTML>
<html lang="en">
<head>
<!-- Generated by javadoc (21) -->
<title>org.webpki.cbor (WebPKI.org Support)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="declaration: package: org.webpki.cbor">
<meta name="generator" content="javadoc/PackageWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../script.js"></script>
</head>
<body class="package-declaration-page">
<script type="text/javascript"></script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top"><button id="navbar-toggle-button" aria-controls="navbar-top" aria-expanded="false" aria-label="Toggle navigation links"><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span></button>
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../index.html">Overview</a></li>
<li class="nav-bar-cell1-rev">Package</li>
<li>Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../help-doc.html#package">Help</a></li>
</ul>
<ul class="sub-nav-list-small">
<li>
<p>Package:</p>
<ul>
<li><a href="#package-description">Description</a></li>
<li>Related Packages</li>
<li><a href="#class-summary">Classes and Interfaces</a></li>
</ul>
</li>
</ul>
</div>
<div class="sub-nav">
<div id="navbar-sub-list">
<ul class="sub-nav-list">
<li>Package:&nbsp;</li>
<li><a href="#package-description">Description</a>&nbsp;|&nbsp;</li>
<li>Related Packages&nbsp;|&nbsp;</li>
<li><a href="#class-summary">Classes and Interfaces</a></li>
</ul>
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<div class="header">
<h1 title="Package org.webpki.cbor" class="title">Package org.webpki.cbor</h1>
</div>
<hr>
<div class="package-signature">package <span class="element-name">org.webpki.cbor</span></div>
<section class="package-description" id="package-description">
<div class="block"><h2 id="cbor---encoder-decoder-signatures-and-encryption-heading">CBOR - Encoder, Decoder, Signatures, and Encryption</h2>
This package contains Java support for <code>CBOR</code> 
[<a href='https://www.rfc-editor.org/rfc/rfc8949.html' class='webpkilink'>RFC&nbsp;8949</a>]
using the 
[<a href='https://www.ietf.org/archive/id/draft-rundgren-cbor-core-12.html' class='webpkilink'>CBOR::Core</a>]
cross platform profile.
<h3 id='supported-objects'>Supported Objects</h3>
The following table shows the supported <code>CBOR</code> objects (data items)
and their mapping to Java, here expressed in
<code>CDDL</code>&nbsp;[<a href='https://www.rfc-editor.org/rfc/rfc8610.html' class='webpkilink'>RFC&nbsp;8610</a>]
notation:
<div class='webpkifloat'>
<table class='webpkitable' style='margin-left:2em'>
<tr><th>CBOR</th><th>Implementation</th>
<th>Java&nbsp;Mapping</th><th>Notes</th></tr>
<tr style='text-align:center'><td><code>int</code></td><td><a href="CBORInt.html" title="class in org.webpki.cbor"><code>CBORInt</code></a></td><td><code>long</code></td><td><code>1</code></td></tr>
<tr style='text-align:center'><td><code>bigint</code></td><td><a href="CBORBigInt.html" title="class in org.webpki.cbor"><code>CBORBigInt</code></a></td><td><code>BigInteger</code></td><td><code>1</code></td></tr>
<tr style='text-align:center'><td rowspan='2'><code>float</code></td><td><a href="CBORFloat.html" title="class in org.webpki.cbor"><code>CBORFloat</code></a></td><td><code>double</code></td><td><code>2</code></td></tr>
<tr style='text-align:center'><td><a href="CBORNonFinite.html" title="class in org.webpki.cbor"><code>CBORNonFinite</code></a></td><td><code>long</code></td><td><code>3</code></td></tr>
<tr style='text-align:center'><td><code>bstr</code></td><td><a href="CBORBytes.html" title="class in org.webpki.cbor"><code>CBORBytes</code></a></td><td><code>byte[]</code></td><td></td></tr>
<tr style='text-align:center'><td><code>tstr</code></td><td><a href="CBORString.html" title="class in org.webpki.cbor"><code>CBORString</code></a></td><td><code>String</code></td><td></td></tr>
<tr style='text-align:center'><td><code>bool</code></td><td><a href="CBORBoolean.html" title="class in org.webpki.cbor"><code>CBORBoolean</code></a></td><td><code>boolean</code></td><td></td></tr>
<tr style='text-align:center'><td><code>null</code></td><td><a href="CBORNull.html" title="class in org.webpki.cbor"><code>CBORNull</code></a></td><td></td><td></td></tr>
<tr style='text-align:center'><td><code>[]</code></td><td><a href="CBORArray.html" title="class in org.webpki.cbor"><code>CBORArray</code></a></td><td></td><td></td></tr>
<tr style='text-align:center'><td><code>{}</code></td><td><a href="CBORMap.html" title="class in org.webpki.cbor"><code>CBORMap</code></a></td><td></td><td></td></tr>
<tr style='text-align:center'><td><code>#6.n</code></td><td><a href="CBORTag.html" title="class in org.webpki.cbor"><code>CBORTag</code></a></td><td></td><td></td></tr>
<tr style='text-align:center'><td><code>#7.n</code></td><td><a href="CBORSimple.html" title="class in org.webpki.cbor"><code>CBORSimple</code></a></td><td></td><td></td></tr>
</table>
</div>
<ol style='margin:0 0'>
<li>The distinction between unsigned and negative values is
 dealt with automatically.
 The encoded representation is determined by the size of the value.
Also see <a href="CBORObject.html#getBigInteger()"><code>CBORObject.getBigInteger()</code></a>.</li>
<li style='padding-top:0.5em'>Floating-point data covers the <code>16</code>, <code>32</code>, and <code>64</code>-bit
<span style='white-space:nowrap'><code>IEEE</code> <code>754</code></span> variants.
The encoded representation is determined by the size and precision of the value.</li>
<li style='padding-top:0.5em'>CBOR applications may also depend on
<a href='doc-files/non-finite-numbers.html' class='webpkilink'>Non-Finite Numbers</a>.</li>
</ol>
<h3 id='time-data'>Time Data</h3>
Since <code>CBOR</code> lacks a native time primitive,
<span style='white-space:nowrap'><code>RFC</code> <code>8949</code></span> introduces
such a feature through tag <code>0</code> and <code>1</code>.  This implementation supports these tags
as well as making the same methods available without the tag constructs.
For details turn to <a href="CBORTag.html#getDateTime()"><code>CBORTag.getDateTime()</code></a>,
<a href="CBORTag.html#getEpochTime()"><code>CBORTag.getEpochTime()</code></a>, <a href="CBORObject.html#getDateTime()"><code>CBORObject.getDateTime()</code></a>,
<a href="CBORObject.html#getEpochTime()"><code>CBORObject.getEpochTime()</code></a>.
<h3 id='deterministic-encoding'>Deterministic Encoding</h3>
For certain security related applications, it has been proven
useful performing cryptographic operations like
hashing and signatures, over "raw" <code>CBOR</code> data.
This API supports such operations through deterministic encoding
which also is the default mode.
The deterministic encoding scheme is described in
[<a href='https://www.ietf.org/archive/id/draft-rundgren-cbor-core-12.html' class='webpkilink'>CBOR::Core</a>].
If input data does not conform to the deterministic encoding scheme,
a <a href="CBORException.html" title="class in org.webpki.cbor"><code>CBORException</code></a> is thrown.
<p id='decoder-options'>
For more control of the decoding process, including dealing with "legacy" <code>CBOR</code>
data as well as with <a href='#examples.seq-encoding' class='webpkilink'>CBOR&nbsp;sequences</a>, see
<a href="CBORDecoder.html#%3Cinit%3E(java.io.InputStream,int,int)"><code>CBORDecoder(inputStream, int, int)</code></a>.
</p>
<p>
On output (<a href="CBORObject.html#encode()"><code>CBORObject.encode()</code></a>)
deterministic encoding is always performed
regardless of if <code>CBOR</code> data was parsed or created programmatically.
</p>
<h3 id='input-data-validation'>Input Data Validation</h3>
A properly designed system validates input data before acting upon it.
This section describes how this can be achieved using this particular
CBOR implementation.
<p>
During <a href="CBORDecoder.html#decode(byte%5B%5D)"><code>CBORDecoder.decode(byte[])</code></a>, <code>CBOR</code> data is checked for
well-formedness as well as by default, adhering to the determinism scheme.
</p>
<p>
After successful decoding, the <code>CBOR</code> data is provided as a <a href="CBORObject.html" title="class in org.webpki.cbor"><code>CBORObject</code></a>.
For extracting the data of <code>CBOR</code> primitives in a Java compatible way,
there are type specific access methods such as 
<a href="CBORObject.html#getInt32()"><code>CBORObject.getInt32()</code></a> and <a href="CBORObject.html#getString()"><code>CBORObject.getString()</code></a>.
For accessing structured <code>CBOR</code> objects, the
<a href="CBORObject.html#getMap()"><code>CBORObject.getMap()</code></a>,
<a href="CBORObject.html#getArray()"><code>CBORObject.getArray()</code></a>,
and <a href="CBORObject.html#getTag()"><code>CBORObject.getTag()</code></a>
methods, return container objects which in turn facilitate
access to individual <code>CBOR</code> objects of the structure.
</p>
<p>
This implementation performs <i>strict type checking</i>.
That is, if an application expects a <code>CBOR</code> integer and calls
<a href="CBORObject.html#getInt32()"><code>CBORObject.getInt32()</code></a>, an exception will be thrown
if the referenced object is not an instance of <a href="CBORInt.html" title="class in org.webpki.cbor"><code>CBORInt</code></a>, or 
if the <code>CBOR</code> integer cannot be represented as a <code>32</code>-bit two-complement value. 
</p>
<p>
However, you typically also want to verify
that <a href="CBORMap.html" title="class in org.webpki.cbor"><code>CBORMap</code></a> objects do not contain unexpected keys,
or that <a href="CBORArray.html" title="class in org.webpki.cbor"><code>CBORArray</code></a> objects contain unread elements.
This can be achieved by calling <a href="CBORObject.html#checkForUnread()"><code>CBORObject.checkForUnread()</code></a>,
<i>after</i> all expected objects have been read.
This method verifies that the current <code>CBOR</code> object (including
possible child objects), have been accessed, otherwise
an exception will be thrown.
</p>
<p>
Built-in cryptographic support classes like <a href="CBORValidator.html" title="class in org.webpki.cbor"><code>CBORValidator</code></a>
and <a href="CBORPublicKey.html" title="class in org.webpki.cbor"><code>CBORPublicKey</code></a> perform strict type checking
as well as verifying that there are no unexpected objects
inside of their respective containers.
</p>
<h3 id='cbor-schema-support'>"Schema" Support</h3>
Although this package does not support a <code>CBOR</code> counterpart
to <a href='https://www.w3.org/XML/Schema' class='webpkilink'>XML&nbsp;Schema</a>,
similar functionality can be achieved using the <i>programmatic
constructs</i> described in the previous section.
For an example, turn to 
<a href='doc-files/typed-objects.html' class='webpkilink'>Typed Objects</a>.
<h3 id='cryptographic-support'>Cryptographic Support</h3>
To aid the use of cryptography, support for
<a href='doc-files/signatures.html' class='webpkilink'>Embedded&nbsp;Signatures</a> and 
<a href='doc-files/encryption.html' class='webpkilink'>Encryption</a> is integrated in the package.
<h3 id='diagnostic-notation'>Diagnostic Notation</h3>
Creating <code>CBOR</code> data in diagnostic notation
is provided by the <a href="CBORObject.html#toString()"><code>CBORObject.toString()</code></a> method.
<p>
However, through the <a href="CBORDiagnosticNotation.html" title="class in org.webpki.cbor"><code>CBORDiagnosticNotation</code></a> class, <code>CBOR</code> data may also be provided
in diagnostic (textual) notation, making <code>CBOR</code> useful for "config" and test data files as well.
</p>
<p>
By adhering to the
<a href='#deterministic-encoding' class='webpkilink'>Deterministic Encoding</a> 
specification above, <code>CBOR</code> data can be <i>bidirectionally</i>
converted between its native (binary) format and diagnostic notation
without getting corrupted.  Note though that text-binary-text "roundtrips"
do not necessarily return identical text: <code>0x10</code> used
as diagnostic notation input will return <code>16</code> as
diagnostic notation output.
Caveat: for reliable conversions, floating-point values <b>must</b>
be aligned with <span style='white-space:nowrap'><code>IEEE</code> <code>754</code></span>
encoding and rounding rules.
</p>
The following table shows how <code>CBOR</code> objects should be represented in 
diagnostic notation:

  <div class='webpkifloat'>
    <table class='webpkitable' style='margin-left:2em'>
      <tr><th>CBOR</th><th>Syntax</th><th style='min-width:30em'>Comment</th><th>Notes</th></tr>
      <tr style='text-align:center'>
        <td rowspan='2'></td>
        <td><kbd><b>/</b></kbd>&nbsp;<i>comment&nbsp;text</i>&nbsp;<kbd><b>/</b></kbd></td>
        <td style='text-align:left'>
          Multi-line comment.
          Multi-line comments are treated as whitespace and may thus also be used
          <i>between</i> CBOR objects.
        </td>
        <td>6</td>
      </tr>
      <tr style='text-align:center'>
        <td><kbd><b>#</b></kbd>&nbsp;<i>comment&nbsp;text</i></td>
        <td style='text-align:left'>
          Single-line comment.
          Single-line comments are terminated by a newline character (<kbd><b>'\n'</b></kbd>) or <kbd><b>EOF</b></kbd>.
          Single-line comments may also terminate lines holding regular CBOR items.
        </td>
        <td>6</td>
      </tr>
      <tr style='text-align:center' id='int-diag'>
        <td><code>integer</code></td>
        <td><span style='white-space:nowrap'><i>{sign}</i><i>{</i>&#x200a;<kbd><b>0b</b></kbd>&#x200a;|&#x200a;<kbd><b>0o</b></kbd>&#x200a;|&#x200a;<kbd><b>0x</b></kbd><i>}&#x200a;n</i></span></td>
        <td style='text-align:left'>
          Arbitrary sized integers without fractional components or exponents.
          <div style='margin-top:0.5em'>
            For <i>input</i> data in diagnostic notation, binary, octal, and hexadecimal notation
            is also supported by prepending numbers with <kbd><b>0b</b></kbd>, <kbd><b>0o</b></kbd>, and <kbd><b>0x</b></kbd> respectively.
            The latter also permit arbitrary insertions of <kbd><b>'_'</b></kbd> characters between digits to
            enable grouping of data like <code>0b100_000000001</code>.
          </div>
        </td>
        <td>1, 2</td>
      </tr>
      <tr style='text-align:center' id='float-diag'>
        <td rowspan='4'><code>float</code></td>
        <td><i>{sign}</i><i>n</i><kbd><b>.</b></kbd><i>n</i><i>{</i><kbd><b>e</b></kbd>&#x2009;<kbd><b>&pm;</b></kbd>&#x2009;<i>n}</i></td>
        <td style='text-align:left'>
          Floating point values
          must include a decimal point and an <i>optional</i> exponent.
        </td>
        <td>1, 2</td>
      </tr>
      <tr style='text-align:center'>
        <td><kbd><b>float'</b></kbd><i>hex&nbsp;data</i><kbd><b>'</b></kbd></td>
        <td style='text-align:left'>
          Any valid 16, 32, or 64-bit float value, including NaN with payloads
          like <code>float'7ff0800000000001'</code>.
        </td>
        <td></td>
      </tr>
      <tr style='text-align:center'>
        <td><kbd><b>NaN</b></kbd></td>
        <td style='text-align:left'>
          Not a number in the default encoding (<code>f97e00</code>).
        </td>
        <td></td>
      </tr>
      <tr style='text-align:center'>
        <td><i>{sign}</i><kbd><b>Infinity</b></kbd></td>
        <td style='text-align:left'>
          Infinity.
        </td>
        <td>2</td>
      </tr>
      <tr style='text-align:center'>
        <td rowspan='4'><code>bstr</code></td>
        <td><kbd><b>h'</b></kbd><i>hex&nbsp;data</i><kbd><b>'</b></kbd></td>
        <td style='text-align:left'>
          Byte data provided in hexadecimal notation.
          Each byte must be represented by two hexadecimal digits.
        </td>
        <td>3</td>
      </tr>
      <tr style='text-align:center'>
        <td><kbd><b>b64'</b></kbd><i>base64&nbsp;data</i><kbd><b>'</b></kbd></td>
        <td style='text-align:left'>
          Byte data provided in base64 or base64URL notation.
          Padding with <kbd><b>'='</b></kbd> characters is <i>optional</i>.
        </td>
        <td>3, 6</td>
      </tr>
      <tr style='text-align:center'>
        <td><kbd><b>'</b></kbd><i>text</i><kbd><b>'</b></kbd></td>
        <td style='text-align:left'>Byte data provided as UTF-8 encoded text.</td>
        <td>4,&nbsp;5,&nbsp;6</td>
      </tr>
      <tr style='text-align:center'>
        <td><kbd><b>&lt;&lt;</b></kbd>&nbsp;<i>object...</i>&nbsp;<kbd><b>&gt;&gt;</b></kbd></td>
        <td style='text-align:left'>Construct holding zero or more comma-separated CBOR objects
          that are subsequently wrapped in a byte string.</td>
        <td>6</td>
      </tr>
      <tr style='text-align:center'>
        <td><code>tstr</code></td>
        <td><kbd><b>&quot;</b></kbd><i>text</i><kbd><b>&quot;</b></kbd>
        <td style='text-align:left'>UTF-8 encoded text string.</td>
        <td>4, 5</td>
      </tr>
      <tr style='text-align:center'>
        <td><code>bool</code></td>
        <td><kbd><b>true</b></kbd>&#x200a;|&#x200a;<kbd><b>false</b></kbd></td>
        <td style='text-align:left'>Boolean value.</td>
        <td></td>
      </tr>
      <tr style='text-align:center'>
        <td><code>null</code></td>
        <td><kbd><b>null</b></kbd></td>
        <td style='text-align:left'>Null value.</td>
        <td></td>
      </tr>
      <tr style='text-align:center'>
        <td><code>[]</code></td>
        <td><kbd><b>[</b></kbd>&nbsp;<i>object...</i>&nbsp;<kbd><b>]</b></kbd></td>
        <td style='text-align:left'>Array with zero or more comma-separated CBOR objects.</td>
        <td></td>
      </tr>
      <tr style='text-align:center'>
        <td><code>{}</code></td>
        <td><kbd><b>{</b></kbd>&nbsp;<i>key</i><kbd><b>:</b></kbd><i>value...</i>&nbsp;<kbd><b>}</b></kbd></td>
        <td style='text-align:left'>
          Map with zero or more comma-separated key/value pairs.
          Key and value pairs are expressed as CBOR objects, separated by a <kbd><b>':'</b></kbd> character.
        </td>
        <td></td>
      </tr>
      <tr style='text-align:center'>
        <td><code>#6.nnn</code></td>
        <td><i>n</i><kbd><b>(</b></kbd>&nbsp;<i>object</i>&nbsp;<kbd><b>)</b></kbd></td>
        <td style='text-align:left'>Tag holding a CBOR object.</td>
        <td>1</td>
      </tr>
      <tr style='text-align:center'>
        <td><code>#7.nnn</code></td>
        <td><kbd><b>simple(</b></kbd><i>n</i><kbd><b>)</b></kbd></td>
        <td style='text-align:left'>Simple value.</td>
        <td>1</td>
      </tr>
      <tr style='text-align:center'>
        <td></td>
        <td><kbd><b>,</b></kbd></td>
        <td style='text-align:left'>Separator character for CBOR sequences.</td>
        <td>6</td>
      </tr>
    </table>
  </div>
  <ol style='margin:0 0'>
    <li>The letter <i>n</i> in the Syntax column denotes one or more digits.</li>
    <li style='padding-top:0.5em'>The optional <i>{sign}</i> must be a single hyphen (<kbd><b>'-'</b></kbd>) character.</li>
    <li style='padding-top:0.5em'>
      <i>Input only</i>: between the quotes, the whitespace characters
      (<kbd><b>' '</b></kbd>, <kbd><b>'\t'</b></kbd>, <kbd><b>'\r'</b></kbd>, <kbd><b>'\n'</b></kbd>)
      are <i>ignored</i>.
    </li>
    <li style='padding-top:0.5em'>
      <i>Input only</i>: the control character <kbd><b>'\n'</b></kbd>
      inside of string quotes <i>become a part of the text</i>.
      For nomalizing line terminators,
      a single <kbd><b>'\r'</b></kbd> or the combination <kbd><b>'\r\n'</b></kbd>
      are rewritten as <kbd><b>'\n'</b></kbd>.
      To <i>avoid</i> getting newline characters (<kbd><b>'\n'</b></kbd>)
      included in multi-line text strings,
      a <i>line continuation marker</i> consisting of a backslash&nbsp;(<kbd><b>'\'</b></kbd>)
      immediately preceding the newline may be used.
    </li>
    <li style='padding-top:0.5em'>
      Text strings may also include JavaScript compatible escape sequences
      (<kbd><b>'\''</b></kbd>, <kbd><b>'\"'</b></kbd>, <kbd><b>'\\'</b></kbd>,
      <kbd><b>'\b'</b></kbd>, <kbd><b>'\f'</b></kbd>, <kbd><b>'\n'</b></kbd>,
      <kbd><b>'\r'</b></kbd>, <kbd><b>'\t'</b></kbd>, <kbd><b>'\u</b></kbd><i>hhhh</i><kbd><b>'</b></kbd>).
    </li>
    <li style='padding-top:0.5em'>
      <i>Input only</i>.
    </li>
  </ol>
  
<h3 id='main.examples'>Using the <code>CBOR</code> API</h3>
  This section provides a few examples on how to use the <code>CBOR</code> API.
  <h5 id='examples.encoding' style='margin:1em 0 0.5em 0'>Encode <code>CBOR</code> Data</h5>
The following code shows how you can create <code>CBOR</code>-encoded data:
<div class='webpkifloat'><div class='webpkibox' style='margin:0.5em 0 0.5em 2em;width:50em'>byte[]&nbsp;cbor&nbsp;=&nbsp;new&nbsp;CBORMap()<br>&nbsp;&nbsp;&nbsp;&nbsp;.set(new&nbsp;CBORInt(1),&nbsp;new&nbsp;CBORFloat(45.7))<br>&nbsp;&nbsp;&nbsp;&nbsp;.set(new&nbsp;CBORInt(2),&nbsp;new&nbsp;CBORString(&quot;Hi&nbsp;there!&quot;)).encode();<br><br>System.out.println(HexaDecimal.encode(cbor));<br><span style='color:#007fdd'>a201fb4046d9999999999a0269486920746865726521</span><br></div></div>
  <h5 id='examples.decoding' style='margin:1em 0 0.5em 0'>Decode <code>CBOR</code> Data</h5>
The following code shows how you can decode <code>CBOR</code>-encoded data,
here using the result of the previous encoding example:
<div class='webpkifloat'><div class='webpkibox' style='margin:0.5em 0 0.5em 2em;width:50em'>CBORMap&nbsp;map&nbsp;=&nbsp;CBORDecoder.decode(cbor).getMap();<br><br>System.out.println(map.toString());&nbsp;&nbsp;//&nbsp;Diagnostic&nbsp;notation<br><span style='color:#007fdd'>{<br>&nbsp;&nbsp;1:&nbsp;45.7,<br>&nbsp;&nbsp;2:&nbsp;&quot;Hi&nbsp;there!&quot;<br>}</span><br><br>System.out.println("Value="&nbsp;+&nbsp;map.get(new&nbsp;CBORInt(1)).getFloat64());<br><span style='color:#007fdd'>Value=45.7</span><br></div></div>
  <h5 id='examples.variant-decoding' style='margin:1em 0 0.5em 0'>Decode Variant <code>CBOR</code> Data</h5>
The following code shows how you can decode variant <code>CBOR</code>-encoded data:
<div class='webpkifloat'><div class='webpkibox' style='margin:0.5em 0 0.5em 2em;width:50em'>CBORObject&nbsp;intOrString&nbsp;=&nbsp;CBORDecoder.decode(cbor);<br>if&nbsp;(intOrString&nbsp;instanceof&nbsp;CBORInt)&nbsp;{<br>&nbsp;&nbsp;int&nbsp;i&nbsp;=&nbsp;intOrString.getInt32();<br>&nbsp;&nbsp;//&nbsp;Do&nbsp;something&nbsp;with&nbsp;i...<br>}&nbsp;else&nbsp;{<br>&nbsp;&nbsp;//&nbsp;This&nbsp;line&nbsp;will&nbsp;throw&nbsp;an&nbsp;exception&nbsp;if&nbsp;the&nbsp;object&nbsp;is&nbsp;not&nbsp;a&nbsp;CBORString<br>&nbsp;&nbsp;String&nbsp;s&nbsp;=&nbsp;intOrString.getString();<br>&nbsp;&nbsp;//&nbsp;Do&nbsp;something&nbsp;with&nbsp;s...<br>}<br></div></div>
  <h5 id='examples.dn-decoding' style='margin:1em 0 0.5em 0'>Decode <code>CBOR</code> Diagnostic Notation</h5>
The following code shows how you can decode <code>CBOR</code> provided in
<a href='#diagnostic-notation' class='webpkilink'>Diagnostic&nbsp;Notation</a>:
<div class='webpkifloat'><div class='webpkibox' style='margin:0.5em 0 0.5em 2em;width:50em'>byte[]&nbsp;cbor&nbsp;=&nbsp;CBORDiagnosticNotation.convert("""<br>{<br>#&nbsp;Comments&nbsp;are&nbsp;also&nbsp;permitted<br>&nbsp;&nbsp;1:&nbsp;45.7,<br>&nbsp;&nbsp;2:&nbsp;&quot;Hi&nbsp;there!&quot;<br>}""").encode();<br><br>System.out.println(HexaDecimal.encode(cbor));<br><span style='color:#007fdd'>a201fb4046d9999999999a0269486920746865726521</span><br></div></div>
  <h5 id='examples.seq-encoding' style='margin:1em 0 0.5em 0'>Encode <code>CBOR</code> Sequence</h5>
The following code shows how you can create <code>CBOR</code> sequences:
<div class='webpkifloat'><div class='webpkibox' style='margin:0.5em 0 0.5em 2em;width:50em'>byte[]&nbsp;cbor&nbsp;=&nbsp;new CBORArray()<br>&nbsp;&nbsp;.add(new CBORMap().set(new CBORInt(7),&nbsp;new CBORString(&quot;Hi!&quot;)))<br>&nbsp;&nbsp;.add(new CBORFloat(4.5))<br>&nbsp;&nbsp;.encodeAsSequence();<br><br>System.out.println(HexaDecimal.encode(cbor));<br><span style='color:#007fdd'>a10763486921f94480</span><br></div></div>
  <h5 id='examples.seq-decoding' style='margin:1em 0 0.5em 0'>Decode <code>CBOR</code> Sequence</h5>
The following code shows how you can decode <code>CBOR</code> sequences,
here using the result of the previous encoding example:
<div class='webpkifloat'><div class='webpkibox' style='margin:0.5em 0 0.5em 2em;width:50em'>CBORDecoder&nbsp;decoder&nbsp;=&nbsp;new&nbsp;CBORDecoder(cbor,&nbsp;CBORDecoder.SEQUENCE_MODE);<br>CBORObject&nbsp;object;<br>while&nbsp;((object&nbsp;=&nbsp;decoder.decodeWithOptions())&nbsp;!=&nbsp;null)&nbsp;{<br>&nbsp;&nbsp;System.out.println(&quot;\n&quot;&nbsp;+&nbsp;object.toString());<br>}<br><br><span style='color:#007fdd'>{<br>&nbsp;&nbsp;7:&nbsp;&quot;Hi!&quot;<br>}</span><br><br><span style='color:#007fdd'>4.5</span><br></div></div></div>
</section>
<section class="summary">
<ul class="summary-list">
<li>
<div id="class-summary">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="class-summary-tab0" role="tab" aria-selected="true" aria-controls="class-summary.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('class-summary', 'class-summary', 2)" class="active-table-tab">All Classes and Interfaces</button><button id="class-summary-tab1" role="tab" aria-selected="false" aria-controls="class-summary.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('class-summary', 'class-summary-tab1', 2)" class="table-tab">Interfaces</button><button id="class-summary-tab2" role="tab" aria-selected="false" aria-controls="class-summary.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('class-summary', 'class-summary-tab2', 2)" class="table-tab">Classes</button><button id="class-summary-tab3" role="tab" aria-selected="false" aria-controls="class-summary.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('class-summary', 'class-summary-tab3', 2)" class="table-tab">Enum Classes</button><button id="class-summary-tab5" role="tab" aria-selected="false" aria-controls="class-summary.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('class-summary', 'class-summary-tab5', 2)" class="table-tab">Exception Classes</button></div>
<div id="class-summary.tabpanel" role="tabpanel">
<div class="summary-table two-column-summary" aria-labelledby="class-summary-tab0">
<div class="table-header col-first">Class</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color class-summary class-summary-tab2"><a href="CBORArray.html" title="class in org.webpki.cbor">CBORArray</a></div>
<div class="col-last even-row-color class-summary class-summary-tab2">
<div class="block">Class for holding CBOR <code>[]</code> (array) objects.</div>
</div>
<div class="col-first odd-row-color class-summary class-summary-tab2"><a href="CBORAsymKeyDecrypter.html" title="class in org.webpki.cbor">CBORAsymKeyDecrypter</a></div>
<div class="col-last odd-row-color class-summary class-summary-tab2">
<div class="block">Class for asymmetric key decryption.</div>
</div>
<div class="col-first even-row-color class-summary class-summary-tab1"><a href="CBORAsymKeyDecrypter.DecrypterImpl.html" title="interface in org.webpki.cbor">CBORAsymKeyDecrypter.DecrypterImpl</a></div>
<div class="col-last even-row-color class-summary class-summary-tab1">
<div class="block">Decrypter engine implementation interface.</div>
</div>
<div class="col-first odd-row-color class-summary class-summary-tab1"><a href="CBORAsymKeyDecrypter.KeyLocator.html" title="interface in org.webpki.cbor">CBORAsymKeyDecrypter.KeyLocator</a></div>
<div class="col-last odd-row-color class-summary class-summary-tab1">
<div class="block">Decrypter private key locator.</div>
</div>
<div class="col-first even-row-color class-summary class-summary-tab2"><a href="CBORAsymKeyEncrypter.html" title="class in org.webpki.cbor">CBORAsymKeyEncrypter</a></div>
<div class="col-last even-row-color class-summary class-summary-tab2">
<div class="block">Class for asymmetric key encryption.</div>
</div>
<div class="col-first odd-row-color class-summary class-summary-tab2"><a href="CBORAsymKeySigner.html" title="class in org.webpki.cbor">CBORAsymKeySigner</a></div>
<div class="col-last odd-row-color class-summary class-summary-tab2">
<div class="block">Class for creating CBOR asymmetric key signatures.</div>
</div>
<div class="col-first even-row-color class-summary class-summary-tab2"><a href="CBORAsymKeyValidator.html" title="class in org.webpki.cbor">CBORAsymKeyValidator</a></div>
<div class="col-last even-row-color class-summary class-summary-tab2">
<div class="block">Class for CBOR asymmetric key signature validation.</div>
</div>
<div class="col-first odd-row-color class-summary class-summary-tab1"><a href="CBORAsymKeyValidator.KeyLocator.html" title="interface in org.webpki.cbor">CBORAsymKeyValidator.KeyLocator</a></div>
<div class="col-last odd-row-color class-summary class-summary-tab1">
<div class="block">Interface for dynamic key retrieval.</div>
</div>
<div class="col-first even-row-color class-summary class-summary-tab2"><a href="CBORBigInt.html" title="class in org.webpki.cbor">CBORBigInt</a></div>
<div class="col-last even-row-color class-summary class-summary-tab2">
<div class="block">Class for holding CBOR integer objects.</div>
</div>
<div class="col-first odd-row-color class-summary class-summary-tab2"><a href="CBORBoolean.html" title="class in org.webpki.cbor">CBORBoolean</a></div>
<div class="col-last odd-row-color class-summary class-summary-tab2">
<div class="block">Class for holding CBOR <code>bool</code> objects.</div>
</div>
<div class="col-first even-row-color class-summary class-summary-tab2"><a href="CBORBytes.html" title="class in org.webpki.cbor">CBORBytes</a></div>
<div class="col-last even-row-color class-summary class-summary-tab2">
<div class="block">Class for holding CBOR <code>bstr</code> objects.</div>
</div>
<div class="col-first odd-row-color class-summary class-summary-tab1"><a href="CBORCryptoConstants.html" title="interface in org.webpki.cbor">CBORCryptoConstants</a></div>
<div class="col-last odd-row-color class-summary class-summary-tab1">
<div class="block">Interface holding common crypto constants.</div>
</div>
<div class="col-first even-row-color class-summary class-summary-tab2"><a href="CBORCryptoUtils.html" title="class in org.webpki.cbor">CBORCryptoUtils</a></div>
<div class="col-last even-row-color class-summary class-summary-tab2">
<div class="block">Class holding CBOR crypto support.</div>
</div>
<div class="col-first odd-row-color class-summary class-summary-tab1"><a href="CBORCryptoUtils.Collector.html" title="interface in org.webpki.cbor">CBORCryptoUtils.Collector</a></div>
<div class="col-last odd-row-color class-summary class-summary-tab1">
<div class="block">Interface for collecting tagged or custom data.</div>
</div>
<div class="col-first even-row-color class-summary class-summary-tab1"><a href="CBORCryptoUtils.Intercepter.html" title="interface in org.webpki.cbor">CBORCryptoUtils.Intercepter</a></div>
<div class="col-last even-row-color class-summary class-summary-tab1">
<div class="block">Interface for customizing map objects.</div>
</div>
<div class="col-first odd-row-color class-summary class-summary-tab3"><a href="CBORCryptoUtils.POLICY.html" title="enum class in org.webpki.cbor">CBORCryptoUtils.POLICY</a></div>
<div class="col-last odd-row-color class-summary class-summary-tab3">
<div class="block">Policy regarding additional CSF and CEF features.</div>
</div>
<div class="col-first even-row-color class-summary class-summary-tab2"><a href="CBORDecoder.html" title="class in org.webpki.cbor">CBORDecoder</a></div>
<div class="col-last even-row-color class-summary class-summary-tab2">
<div class="block">CBOR decoder class.</div>
</div>
<div class="col-first odd-row-color class-summary class-summary-tab2"><a href="CBORDecrypter.html" title="class in org.webpki.cbor">CBORDecrypter</a>&lt;T extends <a href="CBORDecrypter.html" title="class in org.webpki.cbor">CBORDecrypter</a>&lt;?&gt;&gt;</div>
<div class="col-last odd-row-color class-summary class-summary-tab2">
<div class="block">Base class for decrypting data.</div>
</div>
<div class="col-first even-row-color class-summary class-summary-tab2"><a href="CBORDiagnosticNotation.html" title="class in org.webpki.cbor">CBORDiagnosticNotation</a></div>
<div class="col-last even-row-color class-summary class-summary-tab2">
<div class="block">Class for converting diagnostic notation CBOR to CBOR.</div>
</div>
<div class="col-first odd-row-color class-summary class-summary-tab2"><a href="CBOREncrypter.html" title="class in org.webpki.cbor">CBOREncrypter</a>&lt;T extends <a href="CBOREncrypter.html" title="class in org.webpki.cbor">CBOREncrypter</a>&lt;T&gt;&gt;</div>
<div class="col-last odd-row-color class-summary class-summary-tab2">
<div class="block">Base class for encrypting data.</div>
</div>
<div class="col-first even-row-color class-summary class-summary-tab5"><a href="CBORException.html" title="class in org.webpki.cbor">CBORException</a></div>
<div class="col-last even-row-color class-summary class-summary-tab5">
<div class="block">Wrapper for making the WebPKI CBOR library only throw unchecked exceptions.</div>
</div>
<div class="col-first odd-row-color class-summary class-summary-tab2"><a href="CBORFloat.html" title="class in org.webpki.cbor">CBORFloat</a></div>
<div class="col-last odd-row-color class-summary class-summary-tab2">
<div class="block">Class for holding CBOR <code>float</code> objects.</div>
</div>
<div class="col-first even-row-color class-summary class-summary-tab2"><a href="CBORHmacSigner.html" title="class in org.webpki.cbor">CBORHmacSigner</a></div>
<div class="col-last even-row-color class-summary class-summary-tab2">
<div class="block">Class for creating CBOR HMAC signatures.</div>
</div>
<div class="col-first odd-row-color class-summary class-summary-tab2"><a href="CBORHmacValidator.html" title="class in org.webpki.cbor">CBORHmacValidator</a></div>
<div class="col-last odd-row-color class-summary class-summary-tab2">
<div class="block">Class for CBOR HMAC signature validation.</div>
</div>
<div class="col-first even-row-color class-summary class-summary-tab2"><a href="CBORInt.html" title="class in org.webpki.cbor">CBORInt</a></div>
<div class="col-last even-row-color class-summary class-summary-tab2">
<div class="block">Class for holding CBOR <code>int</code> objects.</div>
</div>
<div class="col-first odd-row-color class-summary class-summary-tab2"><a href="CBORKeyPair.html" title="class in org.webpki.cbor">CBORKeyPair</a></div>
<div class="col-last odd-row-color class-summary class-summary-tab2">
<div class="block">Class handling Java/COSE private key conversions.</div>
</div>
<div class="col-first even-row-color class-summary class-summary-tab2"><a href="CBORMap.html" title="class in org.webpki.cbor">CBORMap</a></div>
<div class="col-last even-row-color class-summary class-summary-tab2">
<div class="block">Class for holding CBOR <code>{}</code> (map) objects.</div>
</div>
<div class="col-first odd-row-color class-summary class-summary-tab1"><a href="CBORMap.Dynamic.html" title="interface in org.webpki.cbor">CBORMap.Dynamic</a></div>
<div class="col-last odd-row-color class-summary class-summary-tab1">
<div class="block">Support interface for dynamic CBOR generation.</div>
</div>
<div class="col-first even-row-color class-summary class-summary-tab2"><a href="CBORNonFinite.html" title="class in org.webpki.cbor">CBORNonFinite</a></div>
<div class="col-last even-row-color class-summary class-summary-tab2">
<div class="block">Class for holding CBOR <i>non-finite</i> floating-point objects.</div>
</div>
<div class="col-first odd-row-color class-summary class-summary-tab2"><a href="CBORNull.html" title="class in org.webpki.cbor">CBORNull</a></div>
<div class="col-last odd-row-color class-summary class-summary-tab2">
<div class="block">Class for holding CBOR <code>null</code> objects.</div>
</div>
<div class="col-first even-row-color class-summary class-summary-tab2"><a href="CBORObject.html" title="class in org.webpki.cbor">CBORObject</a></div>
<div class="col-last even-row-color class-summary class-summary-tab2">
<div class="block">Base class for all CBOR objects.</div>
</div>
<div class="col-first odd-row-color class-summary class-summary-tab2"><a href="CBORPublicKey.html" title="class in org.webpki.cbor">CBORPublicKey</a></div>
<div class="col-last odd-row-color class-summary class-summary-tab2">
<div class="block">Class handling Java/COSE public key conversions.</div>
</div>
<div class="col-first even-row-color class-summary class-summary-tab2"><a href="CBORSigner.html" title="class in org.webpki.cbor">CBORSigner</a>&lt;T extends <a href="CBORSigner.html" title="class in org.webpki.cbor">CBORSigner</a>&lt;?&gt;&gt;</div>
<div class="col-last even-row-color class-summary class-summary-tab2">
<div class="block">Base class for signing data.</div>
</div>
<div class="col-first odd-row-color class-summary class-summary-tab2"><a href="CBORSimple.html" title="class in org.webpki.cbor">CBORSimple</a></div>
<div class="col-last odd-row-color class-summary class-summary-tab2">
<div class="block">Class for holding CBOR <code>#7.n</code> (simple) objects.</div>
</div>
<div class="col-first even-row-color class-summary class-summary-tab2"><a href="CBORString.html" title="class in org.webpki.cbor">CBORString</a></div>
<div class="col-last even-row-color class-summary class-summary-tab2">
<div class="block">Class for holding CBOR <code>tstr</code> objects.</div>
</div>
<div class="col-first odd-row-color class-summary class-summary-tab2"><a href="CBORSymKeyDecrypter.html" title="class in org.webpki.cbor">CBORSymKeyDecrypter</a></div>
<div class="col-last odd-row-color class-summary class-summary-tab2">
<div class="block">Class for symmetric key decryption.</div>
</div>
<div class="col-first even-row-color class-summary class-summary-tab1"><a href="CBORSymKeyDecrypter.KeyLocator.html" title="interface in org.webpki.cbor">CBORSymKeyDecrypter.KeyLocator</a></div>
<div class="col-last even-row-color class-summary class-summary-tab1">
<div class="block">Interface for dynamic key retrieval.</div>
</div>
<div class="col-first odd-row-color class-summary class-summary-tab2"><a href="CBORSymKeyEncrypter.html" title="class in org.webpki.cbor">CBORSymKeyEncrypter</a></div>
<div class="col-last odd-row-color class-summary class-summary-tab2">
<div class="block">Class for symmetric key encryption.</div>
</div>
<div class="col-first even-row-color class-summary class-summary-tab2"><a href="CBORTag.html" title="class in org.webpki.cbor">CBORTag</a></div>
<div class="col-last even-row-color class-summary class-summary-tab2">
<div class="block">Class for holding CBOR <code>#6.n</code> (tag) objects.</div>
</div>
<div class="col-first odd-row-color class-summary class-summary-tab2"><a href="CBORTag.COTXObject.html" title="class in org.webpki.cbor">CBORTag.COTXObject</a></div>
<div class="col-last odd-row-color class-summary class-summary-tab2">
<div class="block">Return object for COTX tags.</div>
</div>
<div class="col-first even-row-color class-summary class-summary-tab2"><a href="CBORTypedObjectDecoder.html" title="class in org.webpki.cbor">CBORTypedObjectDecoder</a></div>
<div class="col-last even-row-color class-summary class-summary-tab2">
<div class="block">Base class for typed objects decoders.</div>
</div>
<div class="col-first odd-row-color class-summary class-summary-tab2"><a href="CBORTypedObjectDecoderCache.html" title="class in org.webpki.cbor">CBORTypedObjectDecoderCache</a></div>
<div class="col-last odd-row-color class-summary class-summary-tab2">
<div class="block">Cache for typed object decoders.</div>
</div>
<div class="col-first even-row-color class-summary class-summary-tab2"><a href="CBORUtil.html" title="class in org.webpki.cbor">CBORUtil</a></div>
<div class="col-last even-row-color class-summary class-summary-tab2">&nbsp;</div>
<div class="col-first odd-row-color class-summary class-summary-tab2"><a href="CBORValidator.html" title="class in org.webpki.cbor">CBORValidator</a>&lt;T extends <a href="CBORValidator.html" title="class in org.webpki.cbor">CBORValidator</a>&lt;T&gt;&gt;</div>
<div class="col-last odd-row-color class-summary class-summary-tab2">
<div class="block">Base class for validating signatures.</div>
</div>
<div class="col-first even-row-color class-summary class-summary-tab2"><a href="CBORX509Decrypter.html" title="class in org.webpki.cbor">CBORX509Decrypter</a></div>
<div class="col-last even-row-color class-summary class-summary-tab2">
<div class="block">Class for X.509 decryption.</div>
</div>
<div class="col-first odd-row-color class-summary class-summary-tab1"><a href="CBORX509Decrypter.DecrypterImpl.html" title="interface in org.webpki.cbor">CBORX509Decrypter.DecrypterImpl</a></div>
<div class="col-last odd-row-color class-summary class-summary-tab1">
<div class="block">Decrypter engine implementation interface.</div>
</div>
<div class="col-first even-row-color class-summary class-summary-tab1"><a href="CBORX509Decrypter.KeyLocator.html" title="interface in org.webpki.cbor">CBORX509Decrypter.KeyLocator</a></div>
<div class="col-last even-row-color class-summary class-summary-tab1">
<div class="block">Decrypter private key locator.</div>
</div>
<div class="col-first odd-row-color class-summary class-summary-tab2"><a href="CBORX509Encrypter.html" title="class in org.webpki.cbor">CBORX509Encrypter</a></div>
<div class="col-last odd-row-color class-summary class-summary-tab2">
<div class="block">Class for X.509 encryption.</div>
</div>
<div class="col-first even-row-color class-summary class-summary-tab2"><a href="CBORX509Signer.html" title="class in org.webpki.cbor">CBORX509Signer</a></div>
<div class="col-last even-row-color class-summary class-summary-tab2">
<div class="block">Class for creating X.509 signatures.</div>
</div>
<div class="col-first odd-row-color class-summary class-summary-tab2"><a href="CBORX509Validator.html" title="class in org.webpki.cbor">CBORX509Validator</a></div>
<div class="col-last odd-row-color class-summary class-summary-tab2">
<div class="block">Class for validating X.509 signatures.</div>
</div>
<div class="col-first even-row-color class-summary class-summary-tab1"><a href="CBORX509Validator.Parameters.html" title="interface in org.webpki.cbor">CBORX509Validator.Parameters</a></div>
<div class="col-last even-row-color class-summary class-summary-tab1">
<div class="block">Interface for verifying signature meta data.</div>
</div>
</div>
</div>
</div>
</li>
</ul>
</section>
</main>
<footer role="contentinfo">
<hr>
<p class="legal-copy"><small><i>2005-2025 WebPKI.org.</i></small></p>
</footer>
</div>
</div>
</body>
</html>
